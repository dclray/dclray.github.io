---
title: OSI 7层模型和TCP/IP 4层模型
date: 2021-08-12
sidebar: auto
---
## 模型
OSI：open system interconnection 开放式系统互联参考模型</br>
OSI和TCP/IP的对应关系和协议
<table>
	<thead>
	    <th>OSI七层网络模型</th>
	    <th>TCP/IP四层概念模型</th>
	    <th>对应的网络协议</th> 
        <th>OSI各层基本作用</th> 
	</thead>
	<tr >
        <td>应用层（application）</td>
	    <td rowspan="3">应用层</td>
	    <td>HTTP、TFTP、FTP、NFS、WAIS、SMTP</td>
        <td>为应用程序提供网络服务</td>
	</tr>
	<tr>
	    <td>表示层（Presentation）</td>
	    <td>Telnet，Rlogin，SNMP，Gopher</td>
        <td>数据格式化，加密，解密</td>
	</tr>
	<tr>
	    <td>会话层（Session）</td>
	    <td>SMTP，DNS</td>
        <td>建立、维护、管理会话连接</td>
	</tr>
	<tr>
	    <td>传输层（Transport）</td>
	    <td>传输层</td>
        <td>TCP，UDP</td>
        <td>建立、维护、管理端到端连接</td>
	</tr>
	<tr>
        <td>网络层（Network）</td>
	    <td>网络层</td>
        <td>IP，ICMP，ARP，RARP，AKP，UUCP</td>
        <td>IP寻址和路由选择</td>
	</tr>
	<tr>
	    <td>数据链路层（Data Link）</td>
	    <td rowspan="2">数据链路层</td>
        <td>FDDI，Ethernet，Arpanet，PDN，SLIP，PPP</td>
        <td>控制网络层于物理层之间通信</td>
	</tr>
	<tr>
	    <td>物理层</td>
	    <td>IEEE 802.1A，IEEE 802.0到IEEE 802.11</td>
        <td>比特流传输</td>
	</tr>
</table>

## OSI模型详解
``` mermaid
graph TD
    A[OSI模型] --> B[物理层]
    A--> C[数据链路层]
    A--> D[网络层]
    A--> E[传输层]
    A--> F[会话层]
    A--> G[表示层]
    A--> H[应用层]
```

```mermaid
graph LR
    B[物理层]--> B1["1.通过光缆、电缆、无线电波等方式将设备连接起来组网"]
    B--> B2["2.两个不同局域网（移动、电信）通信，需要ISP互联网服务供应商的物理连接"]
    B--> B3["3.作用：传送比特流 0和1"]
```

```mermaid
graph LR
    C[数据链路层]--> C1["1.作用"]
    C1-->C11["根据以太网协议将一组电信号组成一个数据包，称作“帧”，并控制它的传输"]
    C1-->C12["有两部分：1.标头head:标明数据发送者、接收者、数据类型2.数据data"]
    C--> C2["2.MAC地址"]
    C2-->C21["作用：定位数据包的路径，如发送者、接收者"]
    C2-->C22["网卡地址，每个网卡都是独一无二的12个16进制数"]
    C2-->C23["前6个表示厂商，后6个表示流水号"]
    C-->C3["3.广播方式"]
    C3-->C31["发送者吧数据包，发送给局域网内的所有PC，让每个PC根据MAC地址自动匹配"]
    C3-->C32["发送媒介：分组交换机/网络交换机"]
    C-->C4["网络交换机（network switch）"]
    C4-->C41["扩展网络的机器"]
    C4-->C42["作用：为子网提供更多的接口，以连接更多的PC"]
```

```mermaid
graph LR
    D[网络层]-->D1["作用"]
    D1-->D11["建立 主机-主机的连接"]
    D-->D2["引入新的地址模式-IP地址/网络地址，可以区分哪些PC是在同一子网（局域网）内"]
  
    D-->D3["IPv4:32个二进制，4字节*8位"]
    D3-->D31["前24位表示网络同一子网下，必须相同"]
    D3-->D32["后8位表示主机"]
    D-->D4["IPv6:128个二进制，8字节*16位"]
    D-->D5["子网掩码"]
    D5-->D51["通过&运算判断是否在同一子网下  ip & 255.255.255.0"]
    D-->D6["路由"]
    D6-->D61["作用：通过网络把数据从与地址到目标地址，引导分组传送，经过一些中间节点后，到达目的地"]
    D6-->D62["实现方法：定义一条路径，经过因特网把包发送到目的地，但不指定完全路径，只定义两个网关之间的路径段"]
    D6-->D63["路由器router：连接两个或多个网络并实现路由功能的及其：可看作配有多个网卡的专用电脑，让网卡接入不同的网络中"]
    D6-->D64["网关gateway：网络层使用的路由器，通常指路由器的IP"]
    D-->D7["ARP协议"]
    D7-->D71["作用：局域网内IP和MAC地址的对应关系"]
    D7-->D72["作用位置：介于数据链路层和网络层之间"]
    D7-->D73["局限：仅限于ipv4,ipv6用Neighbor Disovery Protocol替代"]
```
```mermaid
graph LR
    E[传输层]--> E1["作用"]
    E1--> E11["建立 端口-端口间的连接"]
    E-->E2["端口号"]
    E2-->E21["取值：0-65535"]
    E21-->E211["0-1023系统占用"]
    E21-->E212["应用程序随机选取"]
    E21-->E213["http 80"]
    E21-->E214["代理服务 8080"]
    E2-->E22["指定IP包具体给哪个进程；另外，一个进程可能与多个计算机连接，会有多个端口"]
    E-->E3["socket"]
    E3-->E31["进程间通信：需要双方IP，端口号，通信采用的协议栈"]
    E3-->E32["格式：无符号整型变量，用来表示一个通信进程"]
    E3-->E33["本质：是编程接口API，对TCP/IP协议的封装"]
    E-->E4["UDP/TCP"]
    E4-->E41["作用：在数据包标头加上端口号"]
    E4-->E42["TCP:复杂，稳定，有包遗失，会重发"]
    E4-->E43["UDP:简单，但不稳定，不能确定对方是否成功接收"]
```
``` mermaid
graph LR
   H[应用层]-->H1[作用]
   H1-->H11[规定应用程序的数据格式]
   H1-->H12["如ftp，网页、smtp的数据格式"]
   H-->H2["是对OSI模型中最高3层的合并，直接面向用户"]
```
数据链路层数据包（以太网数据包）格式，除了应用层没有头部，其他都有
``` mermaid
graph LR
 A["应用层数据包"]
 B["TCP/UDP头部"]
 C["IP头部"]
 D["以太网头部"]
 subgraph "以太网数据包"
subgraph "IP数据包"
subgraph "TCP/UDP数据包"
   A 
end
   A -->B
end
   B-->C
   end
   C-->D

```
由于以太网数据包的数据部分，最大长度为1500字节，当IP包过大时，会分割下来，但是每个分割包的头部都一样


## 参考链接

- [OSI 7层模型和TCP/IP 4层模型](https://zhuanlan.zhihu.com/p/32059190) 