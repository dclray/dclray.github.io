---
title: git提交代码
date: 2021-11-23
sidebar: auto
---
1. package.json
```json
{
     "workspaces": [
        "applications/*",
        "packages/*",
    ],
    "private": true,
    "scripts": {
        "commit": "git-cz",
        "precommit": "lint-staged",
        "lint": "cross-env NODE_ENV=development eslint --ignore-path .eslintignore --cache **/*.{ts,js,tsx,jsx}",
        "lint-fix": "npm run lint --fix",
        "patch-version": "node ./scripts/patch-version.js",
        "web-version": "node ./scripts/web-version.js",
        "build-web": "yarn workspace @test/web build",
    },
    "devDependencies": {
        "@commitlint/cli": "^8.3.5",
        "@commitlint/config-conventional": "^8.3.4",
        "@types/node": "^14.0.5",
        "@typescript-eslint/eslint-plugin": "^3.0.1",
        "@typescript-eslint/parser": "^3.0.1",
        "commitizen": "^4.1.2",
        "copy-webpack-plugin": "^6.0.1",
        "cross-env": "^7.0.2",
        "cz-conventional-changelog": "^3.2.0",
        "eslint": "^7.1.0",
        "eslint-config-prettier": "^6.11.0",
        "eslint-plugin-flowtype": "^5.1.1",
        "eslint-plugin-import": "^2.20.2",
        "eslint-plugin-jsx-a11y": "^6.2.3",
        "eslint-plugin-prettier": "^3.1.3",
        "eslint-plugin-react": "^7.20.0",
        "eslint-plugin-react-hooks": "^4.0.4",
        "husky": "^4.2.5",
        "jest-junit": "^12.0.0",
        "lint-staged": "^10.2.6",
        "prettier": "^2.0.5",
        "ts-node": "^8.10.1",
        "typescript": "3.8.3",
        "yarn": "^1.22.10"
    }, 
}

```

2. .vscode -> extensions.json,settings.json
```json
{
    // See http://go.microsoft.com/fwlink/?LinkId=827846
    // for the documentation about the extensions.json format
    "recommendations": [
        // Extension identifier format: ${publisher}.${name}. Example: vscode.csharp
        "esbenp.prettier-vscode",
        "dbaeumer.vscode-eslint",
        "editorconfig.editorconfig",
        "daosro.stylelint"
    ]
}
```
settings.json
```json   
{
    "files.associations": {
        ".babelrc": "jsonc",
        ".eslintrc": "jsonc",
        ".huskyrc": "jsonc",
        ".lintstagedrc": "jsonc",
        ".prettierrc": "jsonc",
        ".stylelintrc": "json",
        ".czrc": "jsonc",
        ".jestrc": "jsonc",
        ".dockerignore": "ignore",
        ".eslintignore": "ignore"
    },

    "javascript.validate.enable": true,
    "javascript.format.enable": true,
    "typescript.validate.enable": true,
    "typescript.format.enable": true,

    "search.exclude": {
        ".git": true,
        ".eslintcache": true,
        "dist": true,
        "release": true,
        "node_modules": true,
        "npm-debug.log.*": true,
        "test/**/__snapshots__": true,
        "yarn.lock": true
    },
    "[html]": {
        "editor.formatOnSave": true,
        "editor.defaultFormatter": "esbenp.prettier-vscode"
    },
    "[javascript]": {
        "editor.formatOnSave": true,
        "editor.defaultFormatter": "esbenp.prettier-vscode"
    },
    "[javascriptreact]": {
        "editor.formatOnSave": true,
        "editor.defaultFormatter": "esbenp.prettier-vscode"
    },
    "[typescript]": {
        "editor.formatOnSave": true,
        "editor.defaultFormatter": "esbenp.prettier-vscode"
    },
    "[typescriptreact]": {
        "editor.formatOnSave": true,
        "editor.defaultFormatter": "esbenp.prettier-vscode"
    },
    "[jsonc]": {
        "editor.defaultFormatter": "esbenp.prettier-vscode"
    },
    "editor.codeActionsOnSave": {
        "source.fixAll.eslint": true
    },
    "eslint.validate": ["javascript", "javascriptreact"],
    "svg.preview.background": "transparent"
}
```
.commitlintrc.js
```javascript
module.exports = {
    extends: ["@commitlint/config-conventional"]
};
```
.czrc
```json
{
    "path": "cz-conventional-changelog"
}
```
.editorconfig
```json
#root = true

[*]
indent_style = space
end_of_line = lf
charset = utf-8
trim_trailing_whitespace = true
insert_final_newline = true
max_line_length = 120
indent_size = 4

[*.md]
trim_trailing_whitespace = false
```
.eslintignore
```json
# Logs
logs
*.log

# Runtime data
pids
*.pid
*.seed

# Directory for instrumented libs generated by jscoverage/JSCover
lib-cov

# Coverage directory used by tools like istanbul
coverage

# Grunt intermediate storage (http://gruntjs.com/creating-plugins#storing-task-files)
.grunt

# node-waf configuration
.lock-wscript

# Compiled binary addons (http://nodejs.org/api/addons.html)
build/Release
.eslintcache

# Dependency directory
# https://www.npmjs.org/doc/misc/npm-faq.html#should-i-check-my-node_modules-folder-into-git
node_modules

# OSX
.DS_Store

# App packaged
release
dist

.idea
npm-debug.log.*
__snapshots__

# Package.json
package.json
```
.eslintrc.js
```javascript
module.exports = {
    parser: "@typescript-eslint/parser",
    parserOptions: {
        sourceType: "module",
    },
    plugins: ["@typescript-eslint/eslint-plugin"],
    extends: [
        "plugin:@typescript-eslint/eslint-recommended",
        "plugin:@typescript-eslint/recommended",
        "prettier",
        "prettier/@typescript-eslint",
    ],
    root: true,
    env: {
        node: true,
        jest: true,
    },
    rules: {
        "@typescript-eslint/interface-name-prefix": "off",
        "@typescript-eslint/explicit-function-return-type": "off",
        "@typescript-eslint/no-explicit-any": "off",
        "@typescript-eslint/no-non-null-assertion": "off",
        "@typescript-eslint/camelcase": "off",
        "@typescript-eslint/no-unused-vars": "off",
        "@typescript-eslint/explicit-module-boundary-types": "off",
        "@typescript-eslint/no-empty-function": "off",
    },
};

```
.huskyrc
```json
{
    "hooks": {
        "pre-commit": "lint-staged",
        "commit-msg": "commitlint -E HUSKY_GIT_PARAMS"
    }
}
```
.prettierignore
```json
coverage
dist
```
.prettierrc.js
```javascript
module.exports = {
    overrides: [
        {
            files: [".stylelintrc", ".huskyrc", ".lintstagedrc"],
            options: {
                parser: "json"
            }
        }
    ],
    printWidth: 120,
    tabWidth: 4,
    useTabs: false
};
```
lint-staged.config.js
```javascript
module.exports = {
    "*.{js,jsx,ts,tsx}": filenames => filenames.map(filename => `prettier --write '${filename}'`),
    "{*.json,.{babelrc,eslintrc,prettierrc,stylelintrc,huskyrc}}": filenames =>
        filenames.map(filename => `prettier --write '${filename}'`),
    "*.{css,less}": filenames => filenames.map(filename => `prettier --write '${filename}'`),
    "*.{yml,md}": filenames => filenames.map(filename => `prettier --write '${filename}'`)
};
```

tsconfig.json
```json
{
    "compilerOptions": {
        "allowSyntheticDefaultImports": true,
        "baseUrl": ".",
        "downlevelIteration": true,
        "esModuleInterop": true,
        "experimentalDecorators": true,
        "forceConsistentCasingInFileNames": true,
        "importHelpers": true,
        "isolatedModules": true,
        "jsx": "react",
        "module": "commonjs",
        "moduleResolution": "node",
        "newLine": "lf",
        "noImplicitAny": true,
        "noImplicitThis": true,
        "noImplicitUseStrict": true,
        "noUnusedLocals": true,
        "noUnusedParameters": true,
        "paths": {
            "@test/apps": ["./packages/apps/src"],
        },
        "pretty": true,
        "resolveJsonModule": true,
        "skipLibCheck": true,
        "sourceMap": true,
        "strictFunctionTypes": true,
        "strictNullChecks": true,
        "strictPropertyInitialization": true,
        "target": "es5"
    }
```
