(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{568:function(e,t,o){"use strict";o.r(t);var i=o(6),v=Object(i.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h2",{attrs:{id:"cookie和token-为什么不会劫持token-csrf"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#cookie和token-为什么不会劫持token-csrf"}},[e._v("#")]),e._v(" cookie和token，为什么不会劫持token CSRF")]),e._v(" "),o("ol",[o("li",[e._v("浏览器会自动带上cookie，但是不会自动带上token")]),e._v(" "),o("li",[e._v("cookie其实是服务器产生的sessionid")]),e._v(" "),o("li",[e._v("token需要开发者手动塞进请求头中")]),e._v(" "),o("li",[e._v("跨站请求伪造：CSRF(Cross-site request forgery)")])]),e._v(" "),o("p",[e._v("跨站伪造：")]),e._v(" "),o("ol",[o("li",[e._v("用户登录信任网站A，并产生cookie")]),e._v(" "),o("li",[e._v("用户在没有登出A的情况下，访问危险网站B")]),e._v(" "),o("li",[e._v("B要求访问站点A，发出一个请求，请求带着cookie访问A")]),e._v(" "),o("li",[e._v("A的服务器不知道请求时A发出的还是B发出的，由于浏览器会自动带上用户的Cookie")])]),e._v(" "),o("p",[e._v("解决办法：")]),e._v(" "),o("ol",[o("li",[e._v("服务端产生一个token，发送给客户端，有客户端开发者主动塞入header中而不是浏览器自动带上，服务端拿到token参数校验，不合法的token请求被拒绝")]),e._v(" "),o("li",[e._v("通过header中referer:\n"),o("ol",[o("li",[e._v("举例：百度一张图 www.baidu.com/path/picture.jpg")]),e._v(" "),o("li",[e._v("在我自己的网站www.custom.com/path/home.html中，引用了这个图片的url。")]),e._v(" "),o("li",[e._v("百度服务器在收到图片请求头中根据Referer，能知道是张三的网页，还是李四的网页在请求")]),e._v(" "),o("li",[e._v("可以用来做引流统计。还可以用来做防盗链。如果请求是来自李四的，就拒绝。")])])])]),e._v(" "),o("h2",{attrs:{id:"xss-跨域脚本攻击-cross-site-scripting"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#xss-跨域脚本攻击-cross-site-scripting"}},[e._v("#")]),e._v(" XSS 跨域脚本攻击（cross site scripting）")]),e._v(" "),o("p",[e._v("跨域脚本攻击:")]),e._v(" "),o("ol",[o("li",[e._v("不需要任何的登录认证")]),e._v(" "),o("li",[e._v("它会通过合法的操作（比如在url中输入、在评论框中输入），向你的页面注入脚本。\n比如搜索输入框中。输入"),o("code",[e._v("<script>alert(1)<\/script>")]),e._v("。")])]),e._v(" "),o("p",[e._v("如何防范呢：")]),e._v(" "),o("ol",[o("li",[e._v("URL的编码处理。比如字符“var a = 5”,编码后就是纯文本，不编码就会被浏览器解析成一个变量赋值")]),e._v(" "),o("li",[e._v("移除用户输入的Style节点、Script节点、Iframe节点等过滤。（白名单）")])])])}),[],!1,null,null,null);t.default=v.exports}}]);