(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{576:function(s,t,n){"use strict";n.r(t);var a=n(6),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("p",[s._v("ajax 就是异步的js和xml的缩写，目前一般用JSON代替XML"),n("br"),s._v("\najax 主要用于在不刷新页面的情况下向浏览器发起请求并接受响应，最后局部更新页面"),n("br"),s._v("\n该技术最核心的概念是XMLHttpRequest对象，该对象可发起HTTP请求，我们可以监听其readystate的变化获得响应"),n("br")]),s._v(" "),n("p",[s._v("优点：无刷新请求"),n("br"),s._v("\n缺点：被浏览器限制不能跨域"),n("br"),s._v("\n解决跨域 可以使用JSONP或CROS"),n("br"),s._v("\n具体代码:"),n("br")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" xhr "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("XMLHttpRequest")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nxhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'get'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'xxx.xxx.xx/asfaf/asf'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1.请求方式，2.请求的URL，３.同步还是异步，true表示异步")]),s._v("\nxhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("onreadystatechange")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("xhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("readyState "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" xhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("status "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("xhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("responseText"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nxhr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// readyState ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 0: 对象已建立，但是尚未初始化，还没有调用open方法")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1: 对象已建立，尚未调用send方法")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2: send方法已调用，但是当前的状态以及http头未知")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3: 已接收部分数据，因为响应及http头不全，这时通过responseBody和responseText获取部分数据会出现错误")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 4: 数据接收完毕，此时通过responseBody和responseText获取完整的回应数据")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("h2",{attrs:{id:"xhr对象的方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#xhr对象的方法"}},[s._v("#")]),s._v(" xhr对象的方法：")]),s._v(" "),n("p",[n("strong",[s._v("abort")]),s._v(" ：取消当前的请求\n"),n("strong",[s._v("getAllResponseHeaders")]),s._v("：获取响应的所有HTTP头，每个头名称和值用冒号分割，并以\\r\\n结束。当send方法完成后后，才可以调用该方法\n"),n("strong",[s._v("getResponseHeader")]),s._v("：从响应信息中获取指定的http头，当send方法成功后才可以调用该方法\n"),n("strong",[s._v("setRequestHeader")]),s._v("：单独指定请求的某个http头，如果已经存在以此名称命名的HTTP头，则覆盖，这方法必须在open方法后调用。")])])}),[],!1,null,null,null);t.default=e.exports}}]);